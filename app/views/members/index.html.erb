<h1>Members</h1>

<%= link_to 'New Member', new_member_path, class: 'btn btn-light btn-lg btn-block' %>

<br>
<br>
<table class="table table-striped table-dark table-bordered table-hover table-sm">
  <thead class="thead-light">
    <tr>
      <th id= 'fn'><%= sortable 'first_name'%></th>
      <th id= 'ln'><%= sortable 'last_name'%></th>
      <th id= 'uin'><%= sortable 'member_uin', 'UIN'%></th>
      <th id= 'email'><%= sortable 'email'%></th>
      <th id= 'pn'><%= sortable 'phone_number'%></th>
      <th id= 'join'><%= sortable 'join_date'%></th>
      <th><%= sortable 'first_name'%></th>
      <th><%= sortable 'last_name'%></th>
      <th><%= sortable 'member_uin', 'UIN'%></th>
      <th><%= sortable 'email'%></th>
      <th><%= sortable 'phone_number'%></th>
      <th><%= sortable 'join_date'%></th>
      <th><%= sortable 'membership_type'%></th>
      <th><%= sortable 'date'%></th>
      <th><%= sortable 'officer paid to'%></th>
      <th><%= sortable 'payment_method'%></th>
      <th><%= sortable 'amount'%></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @members.each do |member| %>
      <tr>
        
        <td id='fnv'><%= member.first_name %></td>
        <td id= 'lnv'><%= member.last_name %></td>
        <td id= 'uinv'><%= member.member_uin %></td>
        <td id= 'emailv'><%= member.email %></td>
        <td id= 'pnv'><%= member.phone_number %></td>
        <td id= 'joinv'><%= member.join_date %></td>
        <td><%= member.first_name %></td>
        <td><%= member.last_name %></td>
        <td><%= member.member_uin %></td>
        <td><%= member.email %></td>


        <td><%= member.phone_number %></td>
        <td><%= member.join_date %></td>

        <td><%= member.payments.any? ? member.payments.first.membership_type : "N/A" %></td>
        <td><%= member.payments.any? ? member.payments.first.date : "N/A" %></td>
        <td><%= member.payments.any? ? member.payments.first.officer.officer_uin : "N/A" %></td>
        <td><%= member.payments.any? ? member.payments.first.payment_mtd : "N/A" %></td>


        <td><%= link_to 'Show', member, class: "btn btn-outline-info" %></td>
        <td><%= link_to 'Edit', edit_member_path(member), class: "btn btn-secondary"%></td>
        <td><%= link_to 'Delete', member, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger" %></td>

      </tr>
    <% end %>
  </tbody>
</table>
